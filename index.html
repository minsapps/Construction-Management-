<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Construction Management Login</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <div class="navbar">Construction Management Login</div>

  <h2>Create Admin Account</h2>
  <input id="adminEmail" placeholder="Admin Email">
  <input id="adminPass" placeholder="Admin Password" type="password">
  <button id="createAdminBtn">Create Admin</button>
  <p id="adminStatus"></p>

  <h2>Login</h2>
  <input id="loginEmail" placeholder="Email">
  <input id="loginPass" placeholder="Password" type="password">
  <button id="loginBtn">Login</button>
  <p id="loginStatus"></p>

  <script type="module">
    /* FIREBASE IMPORTS */
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import {
      getAuth,
      createUserWithEmailAndPassword,
      signInWithEmailAndPassword
    } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

    /* FIREBASE CONFIG */
    const firebaseConfig = {
      apiKey: "AIzaSyB0Rj0mJmvfG_iK6ZGTl_UgiTCv8J_Y1Dv0",
      authDomain: "construction-management-f48cb.firebaseapp.com",
      projectId: "construction-management-f48cb",
      storageBucket: "construction-management-f48cb.appspot.com",
      messagingSenderId: "1013804592434",
      appId: "1:1013804592434:web:79226b78462dbfbd519f2b"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    /* CREATE ADMIN */
    document.getElementById("createAdminBtn").onclick = async () => {
      const email = adminEmail.value;
      const pass = adminPass.value;

      try {
        await createUserWithEmailAndPassword(auth, email, pass);
        adminStatus.innerText = "Admin created!";
      } catch (e) {
        adminStatus.innerText = e.message;
      }
    };

    /* LOGIN */
    document.getElementById("loginBtn").onclick = async () => {
      const email = loginEmail.value;
      const pass = loginPass.value;

      try {
        await signInWithEmailAndPassword(auth, email, pass);
        window.location.href = "admin.html";
      } catch (e) {
        loginStatus.innerText = e.message;
      }
    };
  </script>

</body>
</html>
